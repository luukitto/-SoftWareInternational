<div class="p-4">
  <h2 class="text-xl font-semibold mb-4">Sales Managers</h2>
  <button mat-raised-button color="primary" class="mb-4" (click)="openRegistrationPopup()">Register Sales Manager</button>

  <form [formGroup]="filterForm" (ngSubmit)="applyFilter()">
    <div class="grid grid-cols-2 gap-4">
      <mat-form-field class="w-full">
        <mat-label>Username</mat-label>
        <input matInput formControlName="username">
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>First Name</mat-label>
        <input matInput formControlName="firstName">
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Last Name</mat-label>
        <input matInput formControlName="lastName">
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Registration Date Start</mat-label>
        <input matInput formControlName="registrationDateStart" type="date">
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Registration Date End</mat-label>
        <input matInput formControlName="registrationDateEnd" type="date">
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Total Sales Min</mat-label>
        <input matInput formControlName="totalSalesMin" type="number">
      </mat-form-field>
      <mat-form-field class="w-full">
        <mat-label>Total Sales Max</mat-label>
        <input matInput formControlName="totalSalesMax" type="number">
      </mat-form-field>
    </div>
    <button mat-raised-button color="primary" type="submit" class="mt-4">Apply Filter</button>
  </form>

  <table mat-table [dataSource]="salesManagers" class="mat-elevation-z8 w-full bg-white rounded-lg overflow-hidden shadow-md mt-4">
    <ng-container matColumnDef="username">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
      <td mat-cell *matCellDef="let manager" class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">{{ manager.username }}</td>
    </ng-container>

    <ng-container matColumnDef="firstName">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">First Name</th>
      <td mat-cell *matCellDef="let manager" class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">{{ manager.firstName }}</td>
    </ng-container>

    <ng-container matColumnDef="lastName">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Name</th>
      <td mat-cell *matCellDef="let manager" class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">{{ manager.lastName }}</td>
    </ng-container>

    <ng-container matColumnDef="registrationDate">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Registration Date</th>
      <td mat-cell *matCellDef="let manager" class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">{{ manager.registrationDate | date:'dd/MM/yyyy' }}</td>
    </ng-container>

    <ng-container matColumnDef="totalSales">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Sales</th>
      <td mat-cell *matCellDef="let manager" class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">{{ manager.totalSales }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
      <td mat-cell *matCellDef="let manager" class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
        <button mat-icon-button color="primary" (click)="viewSoldProducts(manager)">
          <mat-icon>visibility</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-gray-50"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-100"></tr>
  </table>
</div>
